
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator By HTML & Bootstrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .calc-btn{
            background-color: #e7e3e2;
            width: 60px;
            height: 60px;
        }
        .calc-btn:hover{
            background-color: #c2c0c0;
        }
        .calc-display{
            background-color: black;
            color: white;
            height: 100px;
            width: 310px;
            border-radius: 5px;
        }
        .inputstring{
            margin-top: 5px;
            height: 20px;
            display: block;
            font-size: 20px;
        }
        .expressionString{
            margin-top: 5px;
            height: 20px;
            display: block;
            font-size: 20px;
        }
        .valueString{
            margin-top: 5px;
            height: 20px;
            display: block;
            font-size: 20px;
        }
        .rows div{
            margin-left: 5px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container p-5">
        <div class="d-flex justify-content-center">
           <div class="col-sm-12 col-md-4 col-lg-4">
            <div class="card shadow">
                <div class="d-flex justify-content-center align-item-center p-3" >
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 calc-display">
                           <div id="number_div" class="inputString">0</div>
                           <div id="expression" class="expressionString"></div>
                           <div id="value_div" class="valueString"></div>
                        </div>
                        <input type="hidden" id="savedExpression">
                    </div>
                </div> 
                <div class="d-flex justify-content-center align-item-center p-3"  >
                    <div class="rows" style="display: flex;">
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="NumLock"><small>Num Lock</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="Delete"><small>CE</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="Delete"><small>Del</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="/"><small>/</small> </button>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center align-item-center p-3" >
                    <div class="rows" style="display: flex;">
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="7"><small>7</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="8"><small>8</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="9"><small>9</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="*"><small>x</small> </button>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center align-item-center p-3" >
                    <div class="rows" style="display: flex;">
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="4"><small>4</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="5"><small>5</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="6"><small>6</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="-"><small>-</small> </button>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center align-item-center p-3" >
                    <div class="rows" style="display: flex;">
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="1"><small>1</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="2"><small>2</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="3"><small>3</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="+"><small>+</small> </button>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-center align-item-center p-3" >
                    <div class="rows" style="display: flex;">
                        <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6"> 
                            <button type="button" class="btn btn-light calc-btn" style="width: 150px;" data-event_key="0"><small>0</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="."><small>.</small> </button>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3"> 
                            <button type="button" class="btn btn-light calc-btn" data-event_key="="><small>=</small> </button>
                        </div>
                    </div>
                </div>
            </div>
           </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script>
        $(document).on('keydown', function(e){
            $('button[data-event_key="'+e.key+'"]').addClass('active');
            if ((e.key >= 0 && e.key <= 9)) {
                appendNumber(e.key);
            } else if (e.key == '+' || e.key == '-' || e.key == '*' || e.key == '/') {
                generateExpression(e.key);
            } else if (e.key === '=') {
                generateExpression(e.key);
            }
            console.log(e.key);
        });

        $(document).on('keyup', function(e){
            $('button[data-event_key="'+e.key+'"]').removeClass('active');
            console.log(e.key);
        });

        $('.calc-btn').on('click', function(e){
            var key = $(this).data('event_key');
            if (key != '+' && key != '-' && key != '*' && key != '/' && key != '=' && key != '.' && key != 'Delete' && key != 'NumLock') {
                appendNumber(key);
            } else if (key == '+' || key == '-' || key == '*' || key == '/') {
                generateExpression(key);
            } else if (key == '=') {
                generateExpression('=');
            } else if (key == 'Delete') {
                $('#number_div').html('0');
                $('#expression').html('');
                $('#savedExpression').val('');
            }
            console.log(key);
        });

        function appendNumber(Number){
            var existingNumber = $("#number_div").html();
            console.log(existingNumber);
            var currentString = Number;
            var outputString = '';
            if(existingNumber != '' && existingNumber != undefined && existingNumber != null){
                if(existingNumber == '0'){
                    outputString = currentString;
                }
                else {
                    outputString = existingNumber += currentString;
                }
            }
            else {
                outputString = currentString;
            }
            $('#number_div').html(outputString);
        }

        function generateExpression (operator){
            var existingNumber = $("#number_div").html();
            var expression = '';
            var savedExpression =  $("#savedExpression").val();

            if (operator === '=') {
                expression = savedExpression + existingNumber;
                var result = eval(expression);
                $("#number_div").html(result);
                $("#expression").html('');
                $("#savedExpression").val('');
            } else {
                if(savedExpression == '' || savedExpression == null || savedExpression == undefined){
                    expression  = parseInt(existingNumber) + operator;
                } else {
                    expression = savedExpression + existingNumber + operator;
                }
                $("#expression").html(expression);
                $("#number_div").html("");
                $("#savedExpression").val(expression);
            }
        }
        function evaluateExpression(){
            var result = '';
            var expression = $("#savedExpression").val();
            var existingNumber = $("#number_div").html();
            if(existingNumber != '' || existingNumber != null || existingNumber != undefined){
                 expression = expression + parseInt(existingNumber);
                 $("#expression").html(expression);
            }
            result = eval(expression);
            $("#savedExpression").val("");
            $("#value_div").html(result);
            $("#number_div").html(result);
        }
    </script>
</body>
</html>
